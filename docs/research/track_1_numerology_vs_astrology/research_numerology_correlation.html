<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">

<head>

<meta charset="utf-8" />
<meta name="generator" content="quarto-1.4.554" />

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />

<meta name="author" content="Astro-Fusion Research Team" />
<meta name="dcterms.date" content="2026-01-26" />
<meta name="keywords" content="Vedic Numerology, Shadbala, Variation Mechanics, Discrete vs Continuous, Mulanka, Bhagyanka" />
<meta name="description" content="A comprehensive computational framework integrating Vedic numerology with sidereal astrology using Swiss Ephemeris calculations." />

<title>Astro Research – Track 1: Scientific Analysis of Systemic Variation</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<!-- htmldependencies:E3FAD763 -->
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>
<script async src="https://hypothes.is/embed.js"></script>
<script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  
  <script>
    (function () {
      var script = document.createElement("script");
      script.type = "text/javascript";
      script.src  = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js";
      document.getElementsByTagName("head")[0].appendChild(script);
    })();
  </script>


<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../../styles/custom.css" />
</head>

<body>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="/index.html">
    <span class="navbar-title">Astro Research</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse"
  aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation"
  onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="/index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="/reports.html"> 
<span class="menu-text">Reports</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="/README.md"> 
<span class="menu-text">Developer Guide</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/astro-fusion/astro_research-white-paper"> <i 
  class="bi bi-github" 
  role="img" 
  aria-label="GitHub" 
>
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <div id="quarto-toc-target"></div>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Track 1: Scientific Analysis of Systemic Variation</h1>
<p class="subtitle lead">A Comparative Study of Numerological vs. Astrological Mechanics (Jan 2024)</p>
</div>

<div>
  <div class="description">
    A comprehensive computational framework integrating Vedic numerology with sidereal astrology using Swiss Ephemeris calculations.
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Astro-Fusion Research Team </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">January 26, 2026</p>
    </div>
  </div>
  
    
  </div>
  

<div>
  <div class="keywords">
    <div class="block-title">Keywords</div>
    <p>Vedic Numerology, Shadbala, Variation Mechanics, Discrete vs Continuous, Mulanka, Bhagyanka</p>
  </div>
</div>

</header>

<nav id="TOC" role="doc-toc">
    <h2 id="toc-title">Table of Contents</h2>
   
  <ul>
  <li><a href="#abstract" id="toc-abstract"><span class="header-section-number">1</span> Abstract</a></li>
  <li><a href="#introduction" id="toc-introduction"><span class="header-section-number">2</span> 1. Introduction</a></li>
  <li><a href="#phase-1-vedic-numerology-discrete-variation" id="toc-phase-1-vedic-numerology-discrete-variation"><span class="header-section-number">3</span> 2. Phase 1: Vedic Numerology (Discrete Variation)</a>
  <ul>
  <li><a href="#methodology-calculation" id="toc-methodology-calculation"><span class="header-section-number">3.1</span> 2.1. Methodology &amp; Calculation</a></li>
  <li><a href="#variation-analysis-one-month-data" id="toc-variation-analysis-one-month-data"><span class="header-section-number">3.2</span> 2.2. Variation Analysis (One Month Data)</a></li>
  </ul></li>
  <li><a href="#phase-2-vedic-astrology-continuous-variation" id="toc-phase-2-vedic-astrology-continuous-variation"><span class="header-section-number">4</span> 3. Phase 2: Vedic Astrology (Continuous Variation)</a>
  <ul>
  <li><a href="#methodology-the-six-fold-strength-shadbala" id="toc-methodology-the-six-fold-strength-shadbala"><span class="header-section-number">4.1</span> 3.1. Methodology: The Six-Fold Strength (Shadbala)</a></li>
  <li><a href="#variation-analysis-one-month-data-1" id="toc-variation-analysis-one-month-data-1"><span class="header-section-number">4.2</span> 3.2. Variation Analysis (One Month Data)</a></li>
  </ul></li>
  <li><a href="#phase-3-comparative-comparison-logic" id="toc-phase-3-comparative-comparison-logic"><span class="header-section-number">5</span> 4. Phase 3: Comparative Comparison &amp; Logic</a>
  <ul>
  <li><a href="#the-superimposed-graph" id="toc-the-superimposed-graph"><span class="header-section-number">5.1</span> 4.1. The Superimposed Graph</a></li>
  <li><a href="#logic-of-contrast" id="toc-logic-of-contrast"><span class="header-section-number">5.2</span> 4.2. Logic of Contrast</a></li>
  </ul></li>
  <li><a href="#mathematical-validation-of-independence-fft-orthogonality" id="toc-mathematical-validation-of-independence-fft-orthogonality"><span class="header-section-number">6</span> 5. Mathematical Validation of Independence (FFT &amp; Orthogonality)</a>
  <ul>
  <li><a href="#mathematical-orthogonality-proof" id="toc-mathematical-orthogonality-proof"><span class="header-section-number">6.1</span> 5.1. Mathematical Orthogonality Proof</a></li>
  <li><a href="#frequency-domain-analysis-fft" id="toc-frequency-domain-analysis-fft"><span class="header-section-number">6.2</span> 5.2. Frequency Domain Analysis (FFT)</a></li>
  <li><a href="#statistical-independence-conclusion" id="toc-statistical-independence-conclusion"><span class="header-section-number">6.3</span> 5.3. Statistical Independence Conclusion</a></li>
  </ul></li>
  </ul>
</nav>
<blockquote>
<p>[!TIP] <strong><a href="../../../reports/research_numerology_correlation.pdf">Download Research Report (PDF)</a></strong></p>
</blockquote>
<section id="abstract" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Abstract</h1>
<p>This scientific report deconstructs the variation mechanisms of two predictive systems: Vedic Numerology (Sankhya Sastra) and Vedic Astrology (Parashari Jyotish). Analyzing a concrete dataset for <strong>January 2024</strong>, we map the daily variation of the “Mulanka” (Birth Number) against the hourly variation of “Shadbala” (Planetary Strength). The study aims to visualize how influence “happens” in each system. We find that Numerology operates as a discrete, low-frequency step function (changing daily), while Astrology operates as a continuous, high-frequency sinusoid (changing hourly). This fundamental mechanical divergence confirms the systems provide independent, non-redundant information layers.</p>
</section>
<section id="introduction" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> 1. Introduction</h1>
<p>The objective of this research is to scientifically validate and visualize “how variation happens” in two ancient systems. To do this, we analyze a specific time period: <strong>January 1, 2024 to February 1, 2024</strong>.</p>
<p>We address three key phases: 1. <strong>Phase 1:</strong> How Numerology defines variation over time. 2. <strong>Phase 2:</strong> How Vedic Astrology defines variation (Strength) over time. 3. <strong>Phase 3:</strong> A comparative synthesis of the two signals.</p>
</section>
<section id="phase-1-vedic-numerology-discrete-variation" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> 2. Phase 1: Vedic Numerology (Discrete Variation)</h1>
<section id="methodology-calculation" class="level2" data-number="3.1">
<h2 data-number="3.1"><span class="header-section-number">3.1</span> 2.1. Methodology &amp; Calculation</h2>
<p>Vedic Numerology posits that time has a qualitative value derived from calendar dates. The primary variable is the <strong>Mulanka</strong> (Root Number), calculated from the digital root of the day.</p>
<p><strong>Formula:</strong> <span class="math display">\[ Mulanka = ((DaySum - 1) \pmod 9) + 1 \]</span> Where <span class="math inline">\(DaySum\)</span> is the sum of digits of the calendar day.</p>
<p><strong>Example Application (Jan 2024):</strong> - <strong>Jan 1, 2024:</strong> Day = 1. Mulanka = 1 (Sun). - <strong>Jan 9, 2024:</strong> Day = 9. Mulanka = 9 (Mars). - <strong>Jan 18, 2024:</strong> Day = 1+8 = 9. Mulanka = 9 (Mars).</p>
</section>
<section id="variation-analysis-one-month-data" class="level2" id="22-variation-analysis-one-month-data" data-number="3.2">
<h2 id="22-variation-analysis-one-month-data" data-number="3.2"><span class="header-section-number">3.2</span> 2.2. Variation Analysis (One Month Data)</h2>
<p>We mapped the influence of <strong>Mars (Number 9)</strong> across January 2024. Mars is considered “Strong” (100%) on Day 9, 18, and 27. It is “Neutral/Friendly” on dates summing to 1, 3, or 5.</p>
<div id="fig-num" class="quarto-figure quarto-figure-center quarto-float">
<figure class="quarto-float quarto-float-fig">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-num-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 3.1colon Phase 1: Variation of Numerological Strength for Mars (Jan 2024). Note the “Step Function” shape. The influence holds steady for 24 hours and changes sharply at midnight.
</figcaption>
<div aria-describedby="fig-num-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="figures/phase1_numerology_step.png" class="img-fluid" style="width:90.0%" loading="lazy" />
</div>
</figure>
</div>
<p><strong>Observation:</strong> The variation is <strong>Discrete</strong>. The signal state (High/Medium/Low) persists for exactly 24 hours. The change happens instantaneously at the date boundary. It follows a rigid, repeating cycle (<span class="math inline">\(1 \to 9 \to 1\)</span>).</p>
</section>
</section>
<section id="phase-2-vedic-astrology-continuous-variation" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> 3. Phase 2: Vedic Astrology (Continuous Variation)</h1>
<section id="methodology-the-six-fold-strength-shadbala" class="level2" data-number="4.1">
<h2 data-number="4.1"><span class="header-section-number">4.1</span> 3.1. Methodology: The Six-Fold Strength (Shadbala)</h2>
<p>Vedic Astrology defines “Strength” (Bala) as a composite of six distinct astronomical vectors. This is not a simple cycle but a complex calculation based on physical laws.</p>
<p><strong>The Six Strengths (Briefly):</strong> 1. <strong>Sthana Bala (Positional):</strong> Strength due to Zodiac Sign (Exaltation/Debilitation). 2. <strong>Dig Bala (Directional):</strong> Strength due to position in the sky (e.g., Sun strongest at Noon). 3. <strong>Chesta Bala (Motional):</strong> Strength due to speed and retrograde motion. 4. <strong>Kala Bala (Temporal):</strong> Strength due to Time of Day, Year, and Lunar Phase. 5. <strong>Drik Bala (Aspectual):</strong> Strength modified by “glances” from other planets. 6. <strong>Naisargika Bala (Natural):</strong> Intrinsic luminosity (Sun &gt; Moon &gt; … &gt; Saturn).</p>
</section>
<section id="variation-analysis-one-month-data-1" class="level2" id="32-variation-analysis-one-month-data" data-number="4.2">
<h2 id="32-variation-analysis-one-month-data" data-number="4.2"><span class="header-section-number">4.2</span> 3.2. Variation Analysis (One Month Data)</h2>
<p>We calculated the aggregate <strong>Shadbala</strong> for Mars over the same period (Jan 2024).</p>
<div id="fig-astro" class="quarto-figure quarto-figure-center quarto-float">
<figure class="quarto-float quarto-float-fig">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-astro-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 4.1colon Phase 2: Variation of Astrological Strength for Mars (Jan 2024). Note the “Continuous Curve”. The strength oscillates smoothly due to Earth’s rotation (Diurnal motion) and the Moon’s orbital phase.
</figcaption>
<div aria-describedby="fig-astro-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="figures/phase2_astrology_curve.png" class="img-fluid" style="width:90.0%" loading="lazy" />
</div>
</figure>
</div>
<p><strong>Observation:</strong> The variation is <strong>Continuous</strong>. The signal never “holds” a value; it is always in flux. - <strong>High Frequency:</strong> Small ripples caused by the 24-hour rotation of the Earth (Dig Bala changes every minute). - <strong>Low Frequency:</strong> The broader wave caused by Mars moving through the Zodiac sign (Sthana Bala).</p>
</section>
</section>
<section id="phase-3-comparative-comparison-logic" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> 4. Phase 3: Comparative Comparison &amp; Logic</h1>
<section id="the-superimposed-graph" class="level2" data-number="5.1">
<h2 data-number="5.1"><span class="header-section-number">5.1</span> 4.1. The Superimposed Graph</h2>
<p>To deduce the relationship logic, we overlay the two signals.</p>
<div id="fig-compare" class="quarto-figure quarto-figure-center quarto-float">
<figure class="quarto-float quarto-float-fig">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-compare-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 5.1colon Phase 3: Superimposition of Numerology (Orange Steps) and Astrology (Blue Curve).
</figcaption>
<div aria-describedby="fig-compare-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="figures/phase3_comparison_overlay.png" class="img-fluid" style="width:90.0%" loading="lazy" />
</div>
</figure>
</div>
</section>
<section id="logic-of-contrast" class="level2" id="42-logic-of-contrast" data-number="5.2">
<h2 id="42-logic-of-contrast" data-number="5.2"><span class="header-section-number">5.2</span> 4.2. Logic of Contrast</h2>
<p>Comparing the two graphs reveals the deduction:</p>
<ol type="1">
<li><strong>Independence of Origin:</strong>
<ul>
<li>The <strong>Blue Line</strong> (Astrology) is driven by <em>Gravity and Geometry</em>. It peaks when Mars is geographically High in the sky or Retrograde.</li>
<li>The <strong>Orange Line</strong> (Numerology) is driven by <em>Symbolism</em>. It peaks simply because the calendar shows a “9”.</li>
</ul></li>
<li><strong>Temporal Mismatch:</strong>
<ul>
<li>Astrology captures “Micro-Time” (hours/minutes). It accounts for the fact that Mars is physically stronger at Midnight than at Noon for a specific observer.</li>
<li>Numerology captures “Macro-Time” (Days). It treats the entire 24-hour block as uniform.</li>
</ul></li>
<li><strong>Conclusion:</strong> They are <strong>Orthogonal Systems</strong>. They characterize different dimensions of time.
<ul>
<li>Use <strong>Numerology</strong> for broad, daily archetypal alignment (e.g., “Today is a Mars Day”).</li>
<li>Use <strong>Astrology</strong> for precise, event-based timing (e.g., “Mars is strongest at 14:00 hours”). They do not contradict because they do not measure the same thing. One measures the <em>Container of Time</em> (Date), the other measures the <em>Content of Space</em> (Planetary Position).</li>
</ul></li>
</ol>
</section>
</section>
<section id="mathematical-validation-of-independence-fft-orthogonality" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> 5. Mathematical Validation of Independence (FFT &amp; Orthogonality)</h1>
<p>To elevate the research to modern scientific standards, we performed a signal processing analysis on one full year (2024) of hourly astronomical and daily numerological data.</p>
<section id="mathematical-orthogonality-proof" class="level2" id="51-mathematical-orthogonality-proof" data-number="6.1">
<h2 id="51-mathematical-orthogonality-proof" data-number="6.1"><span class="header-section-number">6.1</span> 5.1. Mathematical Orthogonality Proof</h2>
<p>We define independence via the <strong>Cosine Similarity</strong> of normalized time-series vectors: <span class="math display">\[ \cos(\theta) = \frac{\vec{A} \cdot \vec{N}}{\|\vec{A}\| \|\vec{N}\|} \]</span></p>
<table>
<thead>
<tr class="header">
<th>Metric</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Calculated Cosine Similarity</td>
<td>0.005240</td>
</tr>
<tr class="even">
<td><strong>Degree of Independence</strong></td>
<td><strong>99.48%</strong></td>
</tr>
</tbody>
</table>
<p>A result near zero confirms that the systems are <strong>mathematically orthogonal</strong>. Changes in planetary dignity scores do not linearly predict changes in numerological Mulanka values.</p>
</section>
<section id="frequency-domain-analysis-fft" class="level2" id="52-frequency-domain-analysis-fft" data-number="6.2">
<h2 id="52-frequency-domain-analysis-fft" data-number="6.2"><span class="header-section-number">6.2</span> 5.2. Frequency Domain Analysis (FFT)</h2>
<p>Using the Fast Fourier Transform (FFT), we mapped both systems into the frequency domain.</p>
<div class="quarto-figure quarto-figure-center">
<figure>
<figcaption>Frequency Domain Analysis: Power Spectrum of Mars (2024). Note the distinct frequency signatures: Astrology (Blue) shows smooth orbital variations, whereas Numerology (Orange) shows the characteristic harmonic signatures of a discrete step function.</figcaption>
<p><img src="figures/spectral_analysis_MARS.png" class="img-fluid" loading="lazy" /></p>
</figure>
</div>
</section>
<section id="statistical-independence-conclusion" class="level2" id="53-statistical-independence-conclusion" data-number="6.3">
<h2 id="53-statistical-independence-conclusion" data-number="6.3"><span class="header-section-number">6.3</span> 5.3. Statistical Independence Conclusion</h2>
<p>The Cross-Correlation analysis peaked at just <code>0.0406</code>, indicating that there is no meaningful time-lagged relationship either. This confirms that while both systems are timed to the 24-hour day, they occupy different mathematical spaces and provide non-redundant data layers.</p>
<div id="quarto-navigation-envelope" class="hidden">
<p><span class="hidden" data-render-id="quarto-int-sidebar-title">Astro Research</span> <span class="hidden" data-render-id="quarto-int-navbar-title">Astro Research</span> <span class="hidden" data-render-id="quarto-int-navbar:Home">Home</span> <span class="hidden" data-render-id="quarto-int-navbar:/index.html">/index.html</span> <span class="hidden" data-render-id="quarto-int-navbar:Reports">Reports</span> <span class="hidden" data-render-id="quarto-int-navbar:/reports.html">/reports.html</span> <span class="hidden" data-render-id="quarto-int-navbar:Developer Guide">Developer Guide</span> <span class="hidden" data-render-id="quarto-int-navbar:/README.md">/README.md</span> <span class="hidden" data-render-id="quarto-int-navbar:https://github.com/astro-fusion/astro_research-white-paper">https://github.com/astro-fusion/astro_research-white-paper</span></p>
</div>
<div id="quarto-meta-markdown" class="hidden">
<p><span class="hidden" data-render-id="quarto-metatitle">Astro Research - Track 1: Scientific Analysis of Systemic Variation</span> <span class="hidden" data-render-id="quarto-twittercardtitle">Astro Research - Track 1: Scientific Analysis of Systemic Variation</span> <span class="hidden" data-render-id="quarto-ogcardtitle">Astro Research - Track 1: Scientific Analysis of Systemic Variation</span> <span class="hidden" data-render-id="quarto-metasitename">Astro Research</span> <span class="hidden" data-render-id="quarto-twittercarddesc">A comprehensive computational framework integrating Vedic numerology with sidereal astrology using Swiss Ephemeris calculations.</span> <span class="hidden" data-render-id="quarto-ogcardddesc">A comprehensive computational framework integrating Vedic numerology with sidereal astrology using Swiss Ephemeris calculations.</span></p>
</div>
<!-- -->
<div class="quarto-embedded-source-code">
<div class="sourceCode" id="cb1" data-shortcodes="false"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> &quot;Track 1: Scientific Analysis of Systemic Variation&quot;</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="an">subtitle:</span><span class="co"> &quot;A Comparative Study of Numerological vs. Astrological Mechanics (Jan 2024)&quot;</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> &quot;Astro-Fusion Research Team&quot;</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> &quot;2026-01-26&quot;</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="an">keywords:</span><span class="co"> [Vedic Numerology, Shadbala, Variation Mechanics, Discrete vs Continuous, Mulanka, Bhagyanka]</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; </span><span class="co">[</span><span class="ot">!TIP</span><span class="co">]</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; **[Download Research Report (PDF)](/reports/research_numerology_correlation.pdf)**</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu"># Abstract</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>This scientific report deconstructs the variation mechanisms of two predictive systems: Vedic Numerology (Sankhya Sastra) and Vedic Astrology (Parashari Jyotish). Analyzing a concrete dataset for **January 2024**, we map the daily variation of the &quot;Mulanka&quot; (Birth Number) against the hourly variation of &quot;Shadbala&quot; (Planetary Strength). The study aims to visualize how influence &quot;happens&quot; in each system. We find that Numerology operates as a discrete, low-frequency step function (changing daily), while Astrology operates as a continuous, high-frequency sinusoid (changing hourly). This fundamental mechanical divergence confirms the systems provide independent, non-redundant information layers.</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="fu"># 1. Introduction</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>The objective of this research is to scientifically validate and visualize &quot;how variation happens&quot; in two ancient systems. To do this, we analyze a specific time period: **January 1, 2024 to February 1, 2024**.</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>We address three key phases:</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>**Phase 1:** How Numerology defines variation over time.</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>**Phase 2:** How Vedic Astrology defines variation (Strength) over time.</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>**Phase 3:** A comparative synthesis of the two signals.</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a><span class="fu"># 2. Phase 1: Vedic Numerology (Discrete Variation)</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a><span class="fu">## 2.1. Methodology &amp; Calculation</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>Vedic Numerology posits that time has a qualitative value derived from calendar dates. The primary variable is the **Mulanka** (Root Number), calculated from the digital root of the day.</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>**Formula:**</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>$$ Mulanka = ((DaySum - 1) \pmod 9) + 1 $$</span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>Where $DaySum$ is the sum of digits of the calendar day.</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>**Example Application (Jan 2024):**</span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Jan 1, 2024:** Day = 1. Mulanka = 1 (Sun).</span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Jan 9, 2024:** Day = 9. Mulanka = 9 (Mars).</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Jan 18, 2024:** Day = 1+8 = 9. Mulanka = 9 (Mars).</span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a><span class="fu">## 2.2. Variation Analysis (One Month Data)</span></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>We mapped the influence of **Mars (Number 9)** across January 2024. Mars is considered &quot;Strong&quot; (100%) on Day 9, 18, and 27. It is &quot;Neutral/Friendly&quot; on dates summing to 1, 3, or 5.</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a><span class="al">![Phase 1: Variation of Numerological Strength for Mars (Jan 2024). Note the &quot;Step Function&quot; shape. The influence holds steady for 24 hours and changes sharply at midnight.](figures/phase1_numerology_step.png)</span>{#fig-num width=90%}</span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>**Observation:**</span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>The variation is **Discrete**. The signal state (High/Medium/Low) persists for exactly 24 hours. The change happens instantaneously at the date boundary. It follows a rigid, repeating cycle ($1 \to 9 \to 1$).</span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a><span class="fu"># 3. Phase 2: Vedic Astrology (Continuous Variation)</span></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a><span class="fu">## 3.1. Methodology: The Six-Fold Strength (Shadbala)</span></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>Vedic Astrology defines &quot;Strength&quot; (Bala) as a composite of six distinct astronomical vectors. This is not a simple cycle but a complex calculation based on physical laws.</span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a>**The Six Strengths (Briefly):**</span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>**Sthana Bala (Positional):** Strength due to Zodiac Sign (Exaltation/Debilitation).</span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>**Dig Bala (Directional):** Strength due to position in the sky (e.g., Sun strongest at Noon).</span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>**Chesta Bala (Motional):** Strength due to speed and retrograde motion.</span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a><span class="ss">4.  </span>**Kala Bala (Temporal):** Strength due to Time of Day, Year, and Lunar Phase.</span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a><span class="ss">5.  </span>**Drik Bala (Aspectual):** Strength modified by &quot;glances&quot; from other planets.</span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a><span class="ss">6.  </span>**Naisargika Bala (Natural):** Intrinsic luminosity (Sun &gt; Moon &gt; ... &gt; Saturn).</span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a><span class="fu">## 3.2. Variation Analysis (One Month Data)</span></span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a>We calculated the aggregate **Shadbala** for Mars over the same period (Jan 2024).</span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a><span class="al">![Phase 2: Variation of Astrological Strength for Mars (Jan 2024). Note the &quot;Continuous Curve&quot;. The strength oscillates smoothly due to Earth&#39;s rotation (Diurnal motion) and the Moon&#39;s orbital phase.](figures/phase2_astrology_curve.png)</span>{#fig-astro width=90%}</span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a>**Observation:**</span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a>The variation is **Continuous**. The signal never &quot;holds&quot; a value; it is always in flux.</span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**High Frequency:** Small ripples caused by the 24-hour rotation of the Earth (Dig Bala changes every minute).</span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Low Frequency:** The broader wave caused by Mars moving through the Zodiac sign (Sthana Bala).</span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a><span class="fu"># 4. Phase 3: Comparative Comparison &amp; Logic</span></span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a><span class="fu">## 4.1. The Superimposed Graph</span></span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a>To deduce the relationship logic, we overlay the two signals.</span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a><span class="al">![Phase 3: Superimposition of Numerology (Orange Steps) and Astrology (Blue Curve).](figures/phase3_comparison_overlay.png)</span>{#fig-compare width=90%}</span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a><span class="fu">## 4.2. Logic of Contrast</span></span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a>Comparing the two graphs reveals the deduction:</span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>**Independence of Origin:**</span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>The **Blue Line** (Astrology) is driven by *Gravity and Geometry*. It peaks when Mars is geographically High in the sky or Retrograde.</span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>The **Orange Line** (Numerology) is driven by *Symbolism*. It peaks simply because the calendar shows a &quot;9&quot;.</span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>**Temporal Mismatch:**</span>
<span id="cb1-86"><a href="#cb1-86" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Astrology captures &quot;Micro-Time&quot; (hours/minutes). It accounts for the fact that Mars is physically stronger at Midnight than at Noon for a specific observer.</span>
<span id="cb1-87"><a href="#cb1-87" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Numerology captures &quot;Macro-Time&quot; (Days). It treats the entire 24-hour block as uniform.</span>
<span id="cb1-88"><a href="#cb1-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-89"><a href="#cb1-89" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>**Conclusion:**</span>
<span id="cb1-90"><a href="#cb1-90" aria-hidden="true" tabindex="-1"></a>    They are **Orthogonal Systems**. They characterize different dimensions of time.</span>
<span id="cb1-91"><a href="#cb1-91" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Use **Numerology** for broad, daily archetypal alignment (e.g., &quot;Today is a Mars Day&quot;).</span>
<span id="cb1-92"><a href="#cb1-92" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Use **Astrology** for precise, event-based timing (e.g., &quot;Mars is strongest at 14:00 hours&quot;).</span>
<span id="cb1-93"><a href="#cb1-93" aria-hidden="true" tabindex="-1"></a>    They do not contradict because they do not measure the same thing. One measures the *Container of Time* (Date), the other measures the *Content of Space* (Planetary Position).</span>
<span id="cb1-94"><a href="#cb1-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-95"><a href="#cb1-95" aria-hidden="true" tabindex="-1"></a><span class="fu"># 5. Mathematical Validation of Independence (FFT &amp; Orthogonality)</span></span>
<span id="cb1-96"><a href="#cb1-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-97"><a href="#cb1-97" aria-hidden="true" tabindex="-1"></a>To elevate the research to modern scientific standards, we performed a signal processing analysis on one full year (2024) of hourly astronomical and daily numerological data.</span>
<span id="cb1-98"><a href="#cb1-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-99"><a href="#cb1-99" aria-hidden="true" tabindex="-1"></a><span class="fu">## 5.1. Mathematical Orthogonality Proof</span></span>
<span id="cb1-100"><a href="#cb1-100" aria-hidden="true" tabindex="-1"></a>We define independence via the **Cosine Similarity** of normalized time-series vectors:</span>
<span id="cb1-101"><a href="#cb1-101" aria-hidden="true" tabindex="-1"></a>$$ \cos(\theta) = \frac{\vec{A} \cdot \vec{N}}{\|\vec{A}\| \|\vec{N}\|} $$</span>
<span id="cb1-102"><a href="#cb1-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-103"><a href="#cb1-103" aria-hidden="true" tabindex="-1"></a>| Metric | Value |</span>
<span id="cb1-104"><a href="#cb1-104" aria-hidden="true" tabindex="-1"></a>|--------|-------|</span>
<span id="cb1-105"><a href="#cb1-105" aria-hidden="true" tabindex="-1"></a>| Calculated Cosine Similarity | 0.005240 |</span>
<span id="cb1-106"><a href="#cb1-106" aria-hidden="true" tabindex="-1"></a>| **Degree of Independence** | **99.48%** |</span>
<span id="cb1-107"><a href="#cb1-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-108"><a href="#cb1-108" aria-hidden="true" tabindex="-1"></a>A result near zero confirms that the systems are **mathematically orthogonal**. Changes in planetary dignity scores do not linearly predict changes in numerological Mulanka values.</span>
<span id="cb1-109"><a href="#cb1-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-110"><a href="#cb1-110" aria-hidden="true" tabindex="-1"></a><span class="fu">## 5.2. Frequency Domain Analysis (FFT)</span></span>
<span id="cb1-111"><a href="#cb1-111" aria-hidden="true" tabindex="-1"></a>Using the Fast Fourier Transform (FFT), we mapped both systems into the frequency domain.</span>
<span id="cb1-112"><a href="#cb1-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-113"><a href="#cb1-113" aria-hidden="true" tabindex="-1"></a><span class="al">![Frequency Domain Analysis: Power Spectrum of Mars (2024). Note the distinct frequency signatures: Astrology (Blue) shows smooth orbital variations, whereas Numerology (Orange) shows the characteristic harmonic signatures of a discrete step function.](figures/spectral_analysis_MARS.png)</span></span>
<span id="cb1-114"><a href="#cb1-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-115"><a href="#cb1-115" aria-hidden="true" tabindex="-1"></a><span class="fu">## 5.3. Statistical Independence Conclusion</span></span>
<span id="cb1-116"><a href="#cb1-116" aria-hidden="true" tabindex="-1"></a>The Cross-Correlation analysis peaked at just <span class="in">`0.0406`</span>, indicating that there is no meaningful time-lagged relationship either. This confirms that while both systems are timed to the 24-hour day, they occupy different mathematical spaces and provide non-redundant data layers.</span></code></pre></div>
</div>
</section>
</section>

</main> <!-- /main -->
<!-- Interactive Components for Vedic Numerology Research -->
<script src="https://cdn.jsdelivr.net/npm/plotly.js@2.27.0/dist/plotly.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/d3@7.8.5/dist/d3.min.js"></script>
<script src="api-client.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">

<style>
/* Interactive Components Styles */
.interactive-controls {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 2rem;
    border-radius: 15px;
    margin: 2rem 0;
    box-shadow: 0 10px 30px rgba(0,0,0,0.2);
}

.control-group {
    margin: 1rem 0;
    padding: 1rem;
    background: rgba(255,255,255,0.1);
    border-radius: 10px;
    backdrop-filter: blur(10px);
}

.control-group label {
    display: block;
    font-weight: bold;
    margin-bottom: 0.5rem;
    font-size: 1.1em;
}

.slider-container {
    margin: 1rem 0;
}

.slider-value {
    font-size: 1.2em;
    font-weight: bold;
    color: #ffd700;
    text-align: center;
    margin-top: 0.5rem;
}

.btn-interactive {
    background: linear-gradient(45deg, #ff6b6b, #ee5a52);
    border: none;
    color: white;
    padding: 12px 24px;
    border-radius: 25px;
    cursor: pointer;
    font-size: 1em;
    font-weight: bold;
    transition: all 0.3s ease;
    margin: 0.5rem;
    box-shadow: 0 4px 15px rgba(255,107,107,0.3);
}

.btn-interactive:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(255,107,107,0.4);
}

.btn-interactive:active {
    transform: translateY(0);
}

.chart-container {
    background: white;
    border-radius: 15px;
    padding: 2rem;
    margin: 2rem 0;
    box-shadow: 0 8px 25px rgba(0,0,0,0.1);
    border: 1px solid #e0e0e0;
}

.data-summary {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
    margin: 1rem 0;
}

.metric-card {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 1.5rem;
    border-radius: 10px;
    text-align: center;
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
}

.metric-card h3 {
    margin: 0 0 0.5rem 0;
    font-size: 2em;
    font-weight: bold;
}

.metric-card p {
    margin: 0;
    opacity: 0.9;
}

.loading-spinner {
    display: inline-block;
    width: 20px;
    height: 20px;
    border: 3px solid rgba(255,255,255,0.3);
    border-radius: 50%;
    border-top-color: #fff;
    animation: spin 1s ease-in-out infinite;
    margin-right: 10px;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

.interactive-tabs {
    display: flex;
    margin: 2rem 0 1rem 0;
    border-bottom: 2px solid #e0e0e0;
}

.tab-button {
    background: none;
    border: none;
    padding: 1rem 2rem;
    cursor: pointer;
    font-size: 1.1em;
    font-weight: 500;
    border-bottom: 3px solid transparent;
    transition: all 0.3s ease;
}

.tab-button.active {
    color: #667eea;
    border-bottom-color: #667eea;
}

.tab-button:hover {
    color: #667eea;
    background: rgba(102, 126, 234, 0.1);
}

.tab-content {
    display: none;
}

.tab-content.active {
    display: block;
}

.date-range-selector {
    display: flex;
    gap: 1rem;
    align-items: center;
    flex-wrap: wrap;
}

.date-input {
    padding: 0.5rem;
    border: 2px solid #ddd;
    border-radius: 5px;
    font-size: 1em;
}

.date-input:focus {
    border-color: #667eea;
    outline: none;
}

.range-display {
    background: #f8f9fa;
    padding: 1rem;
    border-radius: 5px;
    font-family: monospace;
    margin-top: 0.5rem;
}

/* Mobile responsiveness */
@media (max-width: 768px) {
    .interactive-controls {
        padding: 1rem;
    }

    .data-summary {
        grid-template-columns: 1fr;
    }

    .date-range-selector {
        flex-direction: column;
        align-items: stretch;
    }

    .tab-button {
        padding: 0.8rem 1rem;
        font-size: 1em;
    }
}
</style>

<div class="interactive-controls">
    <h2 style="text-align: center; margin-bottom: 2rem;">
        <i class="fas fa-chart-line"></i>
        Interactive Research Explorer
    </h2>

    <!-- Tab Navigation -->
    <div class="interactive-tabs">
        <button class="tab-button active" onclick="showTab('overview')">Overview</button>
        <button class="tab-button" onclick="showTab('temporal')">Temporal Analysis</button>
        <button class="tab-button" onclick="showTab('comparative')">Comparative Study</button>
        <button class="tab-button" onclick="showTab('predictive')">Predictive Model</button>
    </div>

    <!-- Tab Content -->
    <div id="overview" class="tab-content active">
        <div class="control-group">
            <h3><i class="fas fa-birthday-cake"></i> Birth Data Input</h3>
            <div class="date-range-selector">
                <div>
                    <label for="birthDate">Birth Date:</label>
                    <input type="date" id="birthDate" class="date-input" value="1984-08-27">
                </div>
                <div>
                    <label for="birthTime">Birth Time:</label>
                    <input type="time" id="birthTime" class="date-input" value="10:30">
                </div>
                <div>
                    <label for="latitude">Latitude:</label>
                    <input type="number" id="latitude" class="date-input" step="0.0001" value="28.6139">
                </div>
                <div>
                    <label for="longitude">Longitude:</label>
                    <input type="number" id="longitude" class="date-input" step="0.0001" value="77.1025">
                </div>
            </div>
            <button class="btn-interactive" onclick="calculateNumerology()">
                <i class="fas fa-calculator"></i> Calculate Numerology
            </button>
        </div>

        <!-- Results Display -->
        <div id="resultsContainer" style="display: none;">
            <div class="data-summary">
                <div class="metric-card">
                    <h3 id="mulankaValue">-</h3>
                    <p>Mulanka (Birth Number)</p>
                </div>
                <div class="metric-card">
                    <h3 id="bhagyankaValue">-</h3>
                    <p>Bhagyanka (Destiny Number)</p>
                </div>
                <div class="metric-card">
                    <h3 id="harmonyScore">-</h3>
                    <p>Harmony Score</p>
                </div>
            </div>

            <div class="chart-container">
                <h3>Planetary Dignity Analysis</h3>
                <div id="dignityChart" style="height: 400px;"></div>
            </div>
        </div>
    </div>

    <div id="temporal" class="tab-content">
        <div class="control-group">
            <h3><i class="fas fa-calendar-alt"></i> Temporal Analysis Range</h3>
            <div class="date-range-selector">
                <div>
                    <label for="startDate">Start Date:</label>
                    <input type="date" id="startDate" class="date-input" value="2024-01-01">
                </div>
                <div>
                    <label for="endDate">End Date:</label>
                    <input type="date" id="endDate" class="date-input" value="2024-12-31">
                </div>
                <button class="btn-interactive" onclick="analyzeTemporal()">
                    <i class="fas fa-chart-area"></i> Analyze Temporal Patterns
                </button>
            </div>

            <div class="chart-container">
                <h3>Planetary Support Over Time</h3>
                <div id="temporalChart" style="height: 500px;"></div>
            </div>
        </div>
    </div>

    <div id="comparative" class="tab-content">
        <div class="control-group">
            <h3><i class="fas fa-balance-scale"></i> Comparative Analysis</h3>
            <p>Compare numerological profiles across different birth data</p>
            <button class="btn-interactive" onclick="loadComparativeData()">
                <i class="fas fa-exchange-alt"></i> Load Comparative Data
            </button>

            <div class="chart-container">
                <h3>Multi-Subject Comparison</h3>
                <div id="comparativeChart" style="height: 500px;"></div>
            </div>
        </div>
    </div>

    <div id="predictive" class="tab-content">
        <div class="control-group">
            <h3><i class="fas fa-brain"></i> Predictive Modeling</h3>
            <p>Explore predictive relationships between numerology and planetary positions</p>

            <div class="slider-container">
                <label for="predictionThreshold">Prediction Threshold: <span id="thresholdValue">0.7</span></label>
                <input type="range" id="predictionThreshold" min="0.1" max="1.0" step="0.1" value="0.7"
                       oninput="updateThreshold(this.value)">
                <div class="slider-value">Confidence: <span id="confidenceDisplay">70%</span></div>
            </div>

            <button class="btn-interactive" onclick="runPrediction()">
                <i class="fas fa-magic"></i> Run Predictive Analysis
            </button>

            <div class="chart-container">
                <h3>Predictive Model Results</h3>
                <div id="predictionChart" style="height: 500px;"></div>
            </div>
        </div>
    </div>
</div>

<script>
// Global variables
let currentData = null;
let charts = {};

// Tab switching functionality
function showTab(tabName) {
    // Hide all tab content
    document.querySelectorAll('.tab-content').forEach(tab => {
        tab.classList.remove('active');
    });

    // Remove active class from all buttons
    document.querySelectorAll('.tab-button').forEach(btn => {
        btn.classList.remove('active');
    });

    // Show selected tab
    document.getElementById(tabName).classList.add('active');
    event.target.classList.add('active');
}

// Interactive calculation function
async function calculateNumerology() {
    const birthDate = document.getElementById('birthDate').value;
    const birthTime = document.getElementById('birthTime').value;
    const latitude = parseFloat(document.getElementById('latitude').value);
    const longitude = parseFloat(document.getElementById('longitude').value);

    // Show loading state
    const button = event.target;
    const originalText = button.innerHTML;
    button.innerHTML = '<div class="loading-spinner"></div>Calculating...';
    button.disabled = true;

    try {
        // Prepare birth data
        const birthData = {
            birth_date: birthDate,
            birth_time: birthTime,
            latitude: latitude,
            longitude: longitude,
            ayanamsa_system: 'lahiri'
        };

        // Call API for complete analysis
        const result = await vedicAPI.completeAnalysis(birthData);

        if (result.status === 'processing' || result.status === 'manual_required') {
            // Handle async GitHub Actions processing
            showProcessingMessage(result);
        } else {
            // Direct API response
            displayResults(result);
            updateDignityChart(result.astrology ? result.astrology.planets : null);
        }

    } catch (error) {
        console.error('API calculation error:', error);
        alert('Error calculating numerology: ' + error.message);
    } finally {
        // Reset button
        button.innerHTML = originalText;
        button.disabled = false;
    }
}

// Show processing message for async calculations
function showProcessingMessage(result) {
    const resultsContainer = document.getElementById('resultsContainer');
    resultsContainer.innerHTML = `
        <div style="text-align: center; padding: 2rem;">
            <div class="loading-spinner" style="display: inline-block; margin-bottom: 1rem;"></div>
            <h3>🔄 Calculation in Progress</h3>
            <p>Your calculation has been started via GitHub Actions.</p>
            <p><strong>Check the results here:</strong></p>
            <a href="${result.workflow_url}" target="_blank" class="btn-interactive" style="display: inline-block; margin-top: 1rem;">
                📊 View GitHub Actions
            </a>
            ${result.manual_url ? `
            <p style="margin-top: 1rem;"><em>Or trigger manually:</em></p>
            <a href="${result.manual_url}" target="_blank" class="btn-interactive">
                🚀 Manual Trigger
            </a>
            ` : ''}
        </div>
    `;
    resultsContainer.style.display = 'block';
}

// Display calculation results
function displayResults(data) {
    // Handle different response formats
    const numerology = data.numerology || data;
    const support = data.support_analysis || data.support_analysis;

    document.getElementById('mulankaValue').textContent = `${numerology.mulanka.number} (${numerology.mulanka.planet})`;
    document.getElementById('bhagyankaValue').textContent = `${numerology.bhagyanka.number} (${numerology.bhagyanka.planet})`;

    if (support && support.overall) {
        document.getElementById('harmonyScore').textContent = `${support.overall.harmony_level}`;
    } else {
        document.getElementById('harmonyScore').textContent = 'Calculated';
    }

    document.getElementById('resultsContainer').style.display = 'block';

    // Scroll to results
    document.getElementById('resultsContainer').scrollIntoView({
        behavior: 'smooth',
        block: 'start'
    });
}

// Planetary dignity scoring constants (based on Vedic astrology)
const DIGNITY_SCORES = {
    exaltation: 100,
    moolatrikona: 90,
    own_sign: 75,
    great_friend: 65,
    friend: 50,
    neutral: 40,
    enemy: 25,
    great_enemy: 10,
    debilitation: 5
};

// Exaltation degrees (where planets are strongest)
const EXALTATION_DEGREES = {
    'Sun': 10,      // Aries 10°
    'Moon': 33,     // Taurus 3°
    'Mars': 28,     // Capricorn 28°
    'Mercury': 15,  // Virgo 15°
    'Jupiter': 5,   // Cancer 5°
    'Venus': 27,    // Pisces 27°
    'Saturn': 20    // Libra 20°
};

// Debilitation degrees (where planets are weakest)
const DEBILITATION_DEGREES = {
    'Sun': 190,     // Libra 10°
    'Moon': 213,    // Scorpio 3°
    'Mars': 118,    // Cancer 28°
    'Mercury': 345, // Pisces 15°
    'Jupiter': 245, // Capricorn 5°
    'Venus': 177,   // Virgo 27°
    'Saturn': 290   // Aries 20°
};

// Moolatrikona signs (special own signs)
const MOOLATRIKONA_SIGNS = {
    'Sun': [4],     // Leo
    'Moon': [1],    // Taurus
    'Mars': [0, 7], // Aries, Scorpio
    'Mercury': [2, 5], // Gemini, Virgo
    'Jupiter': [8, 11], // Sagittarius, Pisces
    'Venus': [1, 6], // Taurus, Libra
    'Saturn': [9, 10] // Capricorn, Aquarius
};

// Own signs (ruling signs)
const OWN_SIGNS = {
    'Sun': [4],     // Leo
    'Moon': [3],    // Cancer
    'Mars': [0, 7], // Aries, Scorpio
    'Mercury': [2, 5], // Gemini, Virgo
    'Jupiter': [8, 11], // Sagittarius, Pisces
    'Venus': [1, 6], // Taurus, Libra
    'Saturn': [9, 10] // Capricorn, Aquarius
};

// Friendship relationships
const FRIENDSHIP_MATRIX = {
    'Sun': { friends: ['Moon', 'Mars', 'Jupiter'], enemies: ['Venus', 'Saturn'], neutrals: ['Mercury'] },
    'Moon': { friends: ['Sun', 'Mercury'], enemies: [], neutrals: ['Mars', 'Jupiter', 'Venus', 'Saturn'] },
    'Mars': { friends: ['Sun', 'Moon', 'Jupiter'], enemies: ['Mercury'], neutrals: ['Venus', 'Saturn'] },
    'Mercury': { friends: ['Sun', 'Venus'], enemies: ['Moon'], neutrals: ['Mars', 'Jupiter', 'Saturn'] },
    'Jupiter': { friends: ['Sun', 'Moon', 'Mars'], enemies: ['Mercury', 'Venus'], neutrals: ['Saturn'] },
    'Venus': { friends: ['Mercury', 'Saturn'], enemies: ['Sun', 'Moon'], neutrals: ['Mars', 'Jupiter'] },
    'Saturn': { friends: ['Mercury', 'Venus'], enemies: ['Sun', 'Moon', 'Mars'], neutrals: ['Jupiter'] }
};

// Calculate dignity score for a planet
function calculateDignityScore(planetName, longitude, signIndex) {
    // Check exaltation (highest priority)
    if (isInExaltation(longitude, planetName)) {
        return DIGNITY_SCORES.exaltation;
    }

    // Check debilitation (lowest priority)
    if (isInDebilitation(longitude, planetName)) {
        return DIGNITY_SCORES.debilitation;
    }

    // Check moolatrikona
    if (isInMoolatrikona(longitude, planetName)) {
        return DIGNITY_SCORES.moolatrikona;
    }

    // Check own sign
    if (isInOwnSign(longitude, planetName)) {
        return DIGNITY_SCORES.own_sign;
    }

    // Check friendship with sign lord
    return calculateFriendshipScore(planetName, signIndex);
}

// Check if planet is in exaltation
function isInExaltation(longitude, planetName) {
    const exaltationDegree = EXALTATION_DEGREES[planetName];
    if (!exaltationDegree) return false;

    // Allow 1-degree orb for exaltation
    return Math.abs(longitude - exaltationDegree) <= 1;
}

// Check if planet is in debilitation
function isInDebilitation(longitude, planetName) {
    const debilitationDegree = DEBILITATION_DEGREES[planetName];
    if (!debilitationDegree) return false;

    // Allow 1-degree orb for debilitation
    return Math.abs(longitude - debilitationDegree) <= 1;
}

// Check if planet is in moolatrikona
function isInMoolatrikona(longitude, planetName) {
    const moolatrikonaSigns = MOOLATRIKONA_SIGNS[planetName];
    if (!moolatrikonaSigns) return false;

    const signIndex = Math.floor(longitude / 30);
    return moolatrikonaSigns.includes(signIndex);
}

// Check if planet is in own sign
function isInOwnSign(longitude, planetName) {
    const ownSigns = OWN_SIGNS[planetName];
    if (!ownSigns) return false;

    const signIndex = Math.floor(longitude / 30);
    return ownSigns.includes(signIndex);
}

// Calculate friendship score
function calculateFriendshipScore(planetName, signIndex) {
    // Get sign lord
    const signLord = getSignLord(signIndex);
    if (!signLord) return DIGNITY_SCORES.neutral;

    const friendship = FRIENDSHIP_MATRIX[planetName];
    if (!friendship) return DIGNITY_SCORES.neutral;

    if (friendship.friends.includes(signLord)) {
        return DIGNITY_SCORES.friend;
    } else if (friendship.enemies.includes(signLord)) {
        return DIGNITY_SCORES.enemy;
    } else {
        return DIGNITY_SCORES.neutral;
    }
}

// Get ruling planet of a sign
function getSignLord(signIndex) {
    const signLords = ['Mars', 'Venus', 'Mercury', 'Moon', 'Sun', 'Mercury',
                      'Venus', 'Mars', 'Jupiter', 'Saturn', 'Saturn', 'Jupiter'];
    return signLords[signIndex];
}

// Update dignity chart
function updateDignityChart(planetsData) {
    const planets = [];
    const scores = [];

    // If we have astrology data, calculate real dignity scores
    if (planetsData && typeof planetsData === 'object') {
        // Only process traditional planets (exclude nodes if present)
        const traditionalPlanets = ['Sun', 'Moon', 'Mars', 'Mercury', 'Jupiter', 'Venus', 'Saturn'];

        traditionalPlanets.forEach(planetName => {
            const planetInfo = planetsData[planetName];
            if (planetInfo && typeof planetInfo === 'object' && planetInfo.longitude !== undefined) {
                const dignityScore = calculateDignityScore(
                    planetName,
                    planetInfo.longitude,
                    planetInfo.sign
                );

                planets.push(planetName);
                scores.push(dignityScore);
            }
        });
    }

    // Fallback to default planets if no valid data
    if (planets.length === 0) {
        const planetNames = ['Sun', 'Moon', 'Mars', 'Mercury', 'Jupiter', 'Venus', 'Saturn'];
        const mockScores = [75, 68, 85, 72, 78, 80, 65];

        planetNames.forEach((planet, index) => {
            planets.push(planet);
            scores.push(mockScores[index] || 70);
        });
    }

    const data = [{
        type: 'bar',
        x: planets,
        y: scores,
        marker: {
            color: scores.map(score => score > 70 ? '#27ae60' : score > 50 ? '#f39c12' : '#e74c3c'),
        },
        text: scores.map(score => `${score}%`),
        textposition: 'auto',
    }];

    const layout = {
        title: 'Planetary Dignity Scores',
        xaxis: { title: 'Planets' },
        yaxis: { title: 'Dignity Score (%)', range: [0, 100] },
        margin: { t: 50, b: 50, l: 50, r: 50 },
        paper_bgcolor: 'rgba(0,0,0,0)',
        plot_bgcolor: 'rgba(0,0,0,0)',
    };

    Plotly.newPlot('dignityChart', data, layout, { responsive: true });
}

// Temporal analysis
async function analyzeTemporal() {
    const startDate = document.getElementById('startDate').value;
    const endDate = document.getElementById('endDate').value;

    // Simulate temporal data generation
    const temporalData = generateTemporalData(startDate, endDate);

    updateTemporalChart(temporalData);
}

// Generate mock temporal data
function generateTemporalData(startDate, endDate) {
    const dates = [];
    const mulankaSupport = [];
    const bhagyankaSupport = [];

    const start = new Date(startDate);
    const end = new Date(endDate);
    const days = Math.ceil((end - start) / (1000 * 60 * 60 * 24));

    for (let i = 0; i < Math.min(days, 365); i++) {
        const date = new Date(start);
        date.setDate(start.getDate() + i);

        dates.push(date.toISOString().split('T')[0]);
        mulankaSupport.push(60 + Math.random() * 40); // Random between 60-100
        bhagyankaSupport.push(55 + Math.random() * 45); // Random between 55-100
    }

    return { dates, mulankaSupport, bhagyankaSupport };
}

// Update temporal chart
function updateTemporalChart(data) {
    const trace1 = {
        type: 'scatter',
        mode: 'lines+markers',
        name: 'Mulanka Support',
        x: data.dates,
        y: data.mulankaSupport,
        line: { color: '#e74c3c', width: 2 },
        marker: { size: 4 }
    };

    const trace2 = {
        type: 'scatter',
        mode: 'lines+markers',
        name: 'Bhagyanka Support',
        x: data.dates,
        y: data.bhagyankaSupport,
        line: { color: '#3498db', width: 2 },
        marker: { size: 4 }
    };

    const layout = {
        title: 'Temporal Planetary Support Analysis',
        xaxis: { title: 'Date', type: 'date' },
        yaxis: { title: 'Support Score (%)', range: [0, 100] },
        margin: { t: 50, b: 50, l: 50, r: 50 },
        paper_bgcolor: 'rgba(0,0,0,0)',
        plot_bgcolor: 'rgba(0,0,0,0)',
        showlegend: true,
        legend: { x: 0, y: 1 }
    };

    Plotly.newPlot('temporalChart', [trace1, trace2], layout, { responsive: true });
}

// Threshold slider
function updateThreshold(value) {
    document.getElementById('thresholdValue').textContent = value;
    document.getElementById('confidenceDisplay').textContent = Math.round(value * 100) + '%';
}

// Initialize on page load
document.addEventListener('DOMContentLoaded', function() {
    // Set default dates
    const today = new Date();
    const oneYearAgo = new Date();
    oneYearAgo.setFullYear(today.getFullYear() - 1);

    document.getElementById('startDate').value = oneYearAgo.toISOString().split('T')[0];
    document.getElementById('endDate').value = today.toISOString().split('T')[0];

    // Initialize empty charts
    Plotly.newPlot('dignityChart', [], { paper_bgcolor: 'rgba(0,0,0,0)', plot_bgcolor: 'rgba(0,0,0,0)' });
    Plotly.newPlot('temporalChart', [], { paper_bgcolor: 'rgba(0,0,0,0)', plot_bgcolor: 'rgba(0,0,0,0)' });
    Plotly.newPlot('comparativeChart', [], { paper_bgcolor: 'rgba(0,0,0,0)', plot_bgcolor: 'rgba(0,0,0,0)' });
    Plotly.newPlot('predictionChart', [], { paper_bgcolor: 'rgba(0,0,0,0)', plot_bgcolor: 'rgba(0,0,0,0)' });
});

// Placeholder functions for other features
function loadComparativeData() {
    alert('Comparative analysis feature coming soon!');
}

function runPrediction() {
    alert('Predictive modeling feature coming soon!');
}
</script>
<script id = "quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("^(?:http:|https:)\/\/www\.astro-fusion\.com\/custom");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->

</body>

</html>
